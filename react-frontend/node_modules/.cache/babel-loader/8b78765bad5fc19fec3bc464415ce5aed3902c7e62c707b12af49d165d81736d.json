{"ast":null,"code":"var _s = $RefreshSig$();\nimport consumer from \"./consumer\";\nimport { useContext } from 'react';\nimport { CableContext } from '.../content/';\nconst sendMessage = (channel, content, user_id, conversation_id) => {\n  channel.perform('send_message', {\n    content,\n    user_id,\n    conversation_id\n  });\n};\nconst createChatChannel = (conversation_id, receivedMessageCallback, user_id) => {\n  _s();\n  const {\n    cable: consumer\n  } = useContext(CableContext);\n  console.log('Creating chat channel for conversation ID:', conversation_id);\n  console.log('Consumer:', consumer);\n  const channel = consumer.subscriptions.create({\n    channel: \"ChatChannel\",\n    conversation_id: conversation_id,\n    user_id: user_id\n  }, {\n    connected() {\n      console.log(\"Connected to chat channel\");\n    },\n    disconnected() {\n      console.log(\"Disconnected from chat channel\");\n    },\n    received(data) {\n      console.log('Received message:', data);\n      receivedMessageCallback(data);\n    }\n  });\n  console.log('Chat channel:', channel);\n  return {\n    channel,\n    sendMessage: (content, user_id, conversation_id) => sendMessage(channel, content, user_id, conversation_id)\n  };\n};\n_s(createChatChannel, \"1nKRA4CrIF28PWYmi3sVeSrINZM=\");\nexport default createChatChannel;","map":{"version":3,"names":["consumer","useContext","CableContext","sendMessage","channel","content","user_id","conversation_id","perform","createChatChannel","receivedMessageCallback","cable","console","log","subscriptions","create","connected","disconnected","received","data"],"sources":["/Users/kqasolli/Desktop/capstone/CatsAndDogs/react-frontend/src/components/content/chat_channel.js"],"sourcesContent":["import consumer from \"./consumer\"\nimport { useContext } from 'react';\nimport { CableContext } from '.../content/'\n\n\nconst sendMessage = (channel, content, user_id, conversation_id) => {\n  channel.perform('send_message', { content, user_id, conversation_id });\n};\n\nconst createChatChannel = (conversation_id, receivedMessageCallback, user_id) => {\n  const { cable: consumer } = useContext(CableContext);\n\n  console.log('Creating chat channel for conversation ID:', conversation_id);\n  console.log('Consumer:', consumer); \n  \n  const channel = consumer.subscriptions.create({\n    channel: \"ChatChannel\",\n    conversation_id: conversation_id,\n    user_id: user_id \n  }, {\n    connected() {\n      console.log(\"Connected to chat channel\");\n    },\n\n    disconnected() {\n      console.log(\"Disconnected from chat channel\");\n    },\n\n    received(data) {\n      console.log('Received message:', data);\n      receivedMessageCallback(data);\n    }\n  });\n\n  console.log('Chat channel:', channel);\n\n  return { \n    channel, \n    sendMessage: (content, user_id, conversation_id) => sendMessage(channel, content, user_id, conversation_id) \n  };\n};\n\n\n\n\nexport default createChatChannel;\n"],"mappings":";AAAA,OAAOA,QAAQ,MAAM,YAAY;AACjC,SAASC,UAAU,QAAQ,OAAO;AAClC,SAASC,YAAY,QAAQ,cAAc;AAG3C,MAAMC,WAAW,GAAG,CAACC,OAAO,EAAEC,OAAO,EAAEC,OAAO,EAAEC,eAAe,KAAK;EAClEH,OAAO,CAACI,OAAO,CAAC,cAAc,EAAE;IAAEH,OAAO;IAAEC,OAAO;IAAEC;EAAgB,CAAC,CAAC;AACxE,CAAC;AAED,MAAME,iBAAiB,GAAG,CAACF,eAAe,EAAEG,uBAAuB,EAAEJ,OAAO,KAAK;EAAA;EAC/E,MAAM;IAAEK,KAAK,EAAEX;EAAS,CAAC,GAAGC,UAAU,CAACC,YAAY,CAAC;EAEpDU,OAAO,CAACC,GAAG,CAAC,4CAA4C,EAAEN,eAAe,CAAC;EAC1EK,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEb,QAAQ,CAAC;EAElC,MAAMI,OAAO,GAAGJ,QAAQ,CAACc,aAAa,CAACC,MAAM,CAAC;IAC5CX,OAAO,EAAE,aAAa;IACtBG,eAAe,EAAEA,eAAe;IAChCD,OAAO,EAAEA;EACX,CAAC,EAAE;IACDU,SAAS,GAAG;MACVJ,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;IAC1C,CAAC;IAEDI,YAAY,GAAG;MACbL,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;IAC/C,CAAC;IAEDK,QAAQ,CAACC,IAAI,EAAE;MACbP,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEM,IAAI,CAAC;MACtCT,uBAAuB,CAACS,IAAI,CAAC;IAC/B;EACF,CAAC,CAAC;EAEFP,OAAO,CAACC,GAAG,CAAC,eAAe,EAAET,OAAO,CAAC;EAErC,OAAO;IACLA,OAAO;IACPD,WAAW,EAAE,CAACE,OAAO,EAAEC,OAAO,EAAEC,eAAe,KAAKJ,WAAW,CAACC,OAAO,EAAEC,OAAO,EAAEC,OAAO,EAAEC,eAAe;EAC5G,CAAC;AACH,CAAC;AAAC,GA/BIE,iBAAiB;AAoCvB,eAAeA,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}