{"ast":null,"code":"var _jsxFileName = \"/Users/kqasolli/Desktop/capstone/CatsAndDogs/react-frontend/src/components/content/ChatModal.js\",\n  _s = $RefreshSig$();\n// components/ChatModal.js\n\nimport React, { useState, useEffect } from 'react';\nimport createChatChannel from '../javascript/channels/chat_channel';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatModal = _ref => {\n  _s();\n  let {\n    currentUser,\n    author,\n    handleClose\n  } = _ref;\n  const [conversation, setConversation] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [inputValue, setInputValue] = useState('');\n  const [chatChannel, setChatChannel] = useState(null);\n  useEffect(() => {\n    if (!conversation) {\n      // Create or fetch the conversation between the current user and the author\n      fetch('http://localhost:3000/conversations', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          sender_id: currentUser.id,\n          receiver_id: author.id\n        })\n      }).then(response => response.json()).then(data => {\n        setConversation(data);\n        const channel = createChatChannel(data.id, handleReceivedMessage);\n        setChatChannel(channel);\n      });\n    }\n  }, [conversation, currentUser, author]);\n  const handleReceivedMessage = message => {\n    setMessages(prevMessages => [...prevMessages, message]);\n  };\n  const handleInputChange = event => {\n    setInputValue(event.target.value);\n  };\n  const handleSendMessage = () => {\n    if (inputValue.trim()) {\n      chatChannel.sendMessage(inputValue, currentUser.id, conversation.id);\n      setInputValue('');\n    }\n  };\n  const renderMessages = () => {\n    return messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: message.user_id === currentUser.id ? 'currentUserMessage' : 'authorMessage',\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: message.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this)\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this));\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    style: {\n      backgroundColor: \"#eee\"\n    },\n    className: \"section\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container py-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row d-flex justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-8 col-lg-6 col-xl-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-header d-flex justify-content-between align-items-center p-3\",\n              style: {\n                borderTop: \"4px solid #ffa900\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"mb-0\",\n                children: \"Chat messages\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex flex-row align-items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-minus me-3 text-muted fa-xs\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 71,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-comments me-3 text-muted fa-xs\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 72,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-times text-muted fa-xs\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 73,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body\",\n              \"data-mdb-perfect-scrollbar\": \"true\",\n              style: {\n                position: \"relative\",\n                height: \"300px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-footer text-muted d-flex justify-content-start align-items-center p-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"input-group mb-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  className: \"form-control\",\n                  placeholder: \"Type message\",\n                  \"aria-label\": \"Recipient's username\",\n                  \"aria-describedby\": \"button-addon2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-warning\",\n                  type: \"button\",\n                  id: \"button-addon2\",\n                  style: {\n                    paddingTop: \".55rem\"\n                  },\n                  children: \"Button\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 92,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatModal, \"mdmVq0X4wchM9PMj0g2brMsL1wI=\");\n_c = ChatModal;\nexport default ChatModal;\nvar _c;\n$RefreshReg$(_c, \"ChatModal\");","map":{"version":3,"names":["React","useState","useEffect","createChatChannel","ChatModal","currentUser","author","handleClose","conversation","setConversation","messages","setMessages","inputValue","setInputValue","chatChannel","setChatChannel","fetch","method","headers","body","JSON","stringify","sender_id","id","receiver_id","then","response","json","data","channel","handleReceivedMessage","message","prevMessages","handleInputChange","event","target","value","handleSendMessage","trim","sendMessage","renderMessages","map","index","user_id","content","backgroundColor","borderTop","position","height","paddingTop"],"sources":["/Users/kqasolli/Desktop/capstone/CatsAndDogs/react-frontend/src/components/content/ChatModal.js"],"sourcesContent":["// components/ChatModal.js\n\nimport React, { useState, useEffect } from 'react';\nimport createChatChannel from '../javascript/channels/chat_channel'\n\n\nconst ChatModal = ({ currentUser, author, handleClose }) => {\n  const [conversation, setConversation] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [inputValue, setInputValue] = useState('');\n  const [chatChannel, setChatChannel] = useState(null);\n\n  useEffect(() => {\n    if (!conversation) {\n      // Create or fetch the conversation between the current user and the author\n      fetch('http://localhost:3000/conversations', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          sender_id: currentUser.id,\n          receiver_id: author.id\n        })\n      })\n        .then((response) => response.json())\n        .then((data) => {\n          setConversation(data);\n          const channel = createChatChannel(data.id, handleReceivedMessage);\n          setChatChannel(channel);\n        });\n    }\n  }, [conversation, currentUser, author]);\n\n  const handleReceivedMessage = (message) => {\n    setMessages((prevMessages) => [...prevMessages, message]);\n  };\n\n  const handleInputChange = (event) => {\n    setInputValue(event.target.value);\n  };\n\n  const handleSendMessage = () => {\n    if (inputValue.trim()) {\n      chatChannel.sendMessage(inputValue, currentUser.id, conversation.id);\n      setInputValue('');\n    }\n  };\n\n  const renderMessages = () => {\n    return messages.map((message, index) => (\n      <div key={index} className={message.user_id === currentUser.id ? 'currentUserMessage' : 'authorMessage'}>\n        <p>{message.content}</p>\n      </div>\n    ));\n  };\n\n  return (\n    <section style={{ backgroundColor: \"#eee\" }} className=\"section\">\n        <div className=\"container py-5\">\n          <div className=\"row d-flex justify-content-center\">\n            <div className=\"col-md-8 col-lg-6 col-xl-4\">\n              <div className=\"card\">\n                <div\n                  className=\"card-header d-flex justify-content-between align-items-center p-3\"\n                  style={{ borderTop: \"4px solid #ffa900\" }}\n                >\n                  <h5 className=\"mb-0\">Chat messages</h5>\n                  <div className=\"d-flex flex-row align-items-center\">\n                    <i className=\"fas fa-minus me-3 text-muted fa-xs\"></i>\n                    <i className=\"fas fa-comments me-3 text-muted fa-xs\"></i>\n                    <i className=\"fas fa-times text-muted fa-xs\"></i>\n                  </div>\n                </div>\n                <div\n                  className=\"card-body\"\n                  data-mdb-perfect-scrollbar=\"true\"\n                  style={{ position: \"relative\", height: \"300px\" }}>\n  \n  \n                </div>\n                <div className=\"card-footer text-muted d-flex justify-content-start align-items-center p-3\">\n                  <div className=\"input-group mb-0\">\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      placeholder=\"Type message\"\n                      aria-label=\"Recipient's username\"\n                      aria-describedby=\"button-addon2\"\n                    />\n                    <button\n                      className=\"btn btn-warning\"\n                      type=\"button\"\n                      id=\"button-addon2\"\n                      style={{ paddingTop: \".55rem\" }}\n                    >\n                      Button\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n  );\n};\n\nexport default ChatModal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}