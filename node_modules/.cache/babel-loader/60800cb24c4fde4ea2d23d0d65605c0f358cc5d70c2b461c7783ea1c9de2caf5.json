{"ast":null,"code":"var _jsxFileName = \"/Users/kqasolli/Desktop/travel-ed/src/components/content/AddComment.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport FetchCommentsForm from './FetchCommentsForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function AddComment(_ref) {\n  _s();\n  let {\n    animal,\n    setAnimals\n  } = _ref;\n  const [isLikeClicked, setIsLikeClicked] = useState(false);\n  const [likeComment, setLikeComment] = useState({});\n  const [showReply, setShowReply] = useState({});\n  const [newReply, setNewReply] = useState(\"\");\n  function likeComments(index) {\n    setLikeComment(prev => {\n      let newLikeComment = {\n        ...prev\n      };\n      newLikeComment[index] = !newLikeComment[index];\n      return newLikeComment;\n    });\n    fetch(`http://localhost:3000/animals/${animal.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"content-type\": \"application/json\",\n        accept: \"application/json\"\n      },\n      body: JSON.stringify({\n        comments: animal.comments.map((comment, i) => i === index ? {\n          ...comment,\n          likes: comment.likes + 1\n        } : comment)\n      })\n    }).then(response => response.json()).then(updatedAnimals => {\n      setAnimals(prevAnimals => prevAnimals.map(currentAnimals => {\n        if (currentAnimals.id === updatedAnimals.id) {\n          return updatedAnimals;\n        } else {\n          return currentAnimals;\n        }\n      }));\n    });\n  }\n  function showCommentReplies(commentIndex) {\n    setShowReply(prev => {\n      let isCommentShown = {\n        ...prev\n      };\n      isCommentShown[commentIndex] = !isCommentShown[commentIndex];\n      return isCommentShown;\n    });\n  }\n  function handleReplyChange(e) {\n    setNewReply(e.target.value);\n  }\n  function handleReplySubmit(e, commentIndex) {\n    e.preventDefault();\n    fetch(`http://localhost:3000/animals/${animal.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"content-type\": \"application/json\",\n        accept: \"application/json\"\n      },\n      body: JSON.stringify({\n        comments: animal.comments.map((comment, i) => {\n          if (i === commentIndex) {\n            return {\n              ...comment,\n              replies: [...comment.replies, {\n                reply: newReply\n              }]\n            };\n          }\n          return comment;\n        })\n      })\n    }).then(response => response.json()).then(updatedAnimals => {\n      setAnimals(prevAnimals => prevAnimals.map(currentAnimals => {\n        if (currentAnimals.id === updatedAnimals.id) {\n          return updatedAnimals;\n        } else {\n          return currentAnimals;\n        }\n      }));\n    });\n    setNewReply(\"\");\n    setShowReply({});\n  }\n  function handleCommentSubmit(e) {\n    e.preventDefault();\n    if (newComment && !isLikeClicked) {\n      likeComments();\n      setnewComment(\"\");\n      updateAnimals();\n    }\n    setIsLikeClicked(false);\n    setnewComment(\"\");\n    setshowComment(true);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleCommentSubmit,\n      children: [animal.comments.map((comments, commentIndex) => /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"comments-list\",\n          animal: animal,\n          setAnimals: setAnimals,\n          children: comments.comment\n        }, commentIndex, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"like-reply\",\n          onClick: () => likeComments(commentIndex),\n          children: [likeComment[commentIndex] ? \"♥\" : \"♡\", \"Like\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"like-reply\",\n          onClick: e => showCommentReplies(commentIndex),\n          children: \"\\u21B3 Reply\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"ul-replies\",\n          children: comments.replies.map((reply, replyIndex) => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"replies\",\n            children: reply.reply\n          }, replyIndex, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this), showReply[commentIndex] ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"comment-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n            type: \"text\",\n            value: newReply,\n            onChange: handleReplyChange,\n            placeholder: \"Write a reply...\",\n            className: \"type-reply\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"post-comment-btn replyBtn\",\n            type: \"submit\",\n            onClick: e => handleReplySubmit(e, commentIndex),\n            children: \"Reply\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }, this) : null]\n      }, void 0, true)), /*#__PURE__*/_jsxDEV(FetchCommentsForm, {\n        animal: animal,\n        setAnimals: setAnimals,\n        likeComments: likeComments\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 5\n  }, this);\n}\n_s(AddComment, \"q4yOzScU45iCWsFDKAS0QiXNP/c=\");\n_c = AddComment;\nvar _c;\n$RefreshReg$(_c, \"AddComment\");","map":{"version":3,"names":["React","useState","FetchCommentsForm","AddComment","animal","setAnimals","isLikeClicked","setIsLikeClicked","likeComment","setLikeComment","showReply","setShowReply","newReply","setNewReply","likeComments","index","prev","newLikeComment","fetch","id","method","headers","accept","body","JSON","stringify","comments","map","comment","i","likes","then","response","json","updatedAnimals","prevAnimals","currentAnimals","showCommentReplies","commentIndex","isCommentShown","handleReplyChange","e","target","value","handleReplySubmit","preventDefault","replies","reply","handleCommentSubmit","newComment","setnewComment","updateAnimals","setshowComment","replyIndex"],"sources":["/Users/kqasolli/Desktop/travel-ed/src/components/content/AddComment.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport FetchCommentsForm from './FetchCommentsForm'\n\nexport default function AddComment({ animal, setAnimals }) {\n  \n  const [isLikeClicked, setIsLikeClicked] = useState(false);\n  const [likeComment, setLikeComment] = useState({});\n  const [showReply, setShowReply] = useState({});\n  const [newReply, setNewReply] = useState(\"\");\n\n  \n  function likeComments(index) {\n    setLikeComment((prev) => {\n      let newLikeComment = { ...prev };\n      newLikeComment[index] = !newLikeComment[index];\n      return newLikeComment;\n    });\n    fetch(`http://localhost:3000/animals/${animal.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"content-type\": \"application/json\",\n        accept: \"application/json\",\n      },\n      body: JSON.stringify({\n        comments: animal.comments.map((comment, i) =>\n          i === index ? { ...comment, likes: comment.likes + 1 } : comment\n        ),\n      }),\n    })\n      .then((response) => response.json())\n      .then((updatedAnimals) => {\n        setAnimals((prevAnimals) =>\n          prevAnimals.map((currentAnimals) => {\n            if (currentAnimals.id === updatedAnimals.id) {\n              return updatedAnimals;\n            } else {\n              return currentAnimals;\n            }\n          })\n        );\n      });\n  }\n\n  function showCommentReplies(commentIndex) {\n    setShowReply((prev) => {\n      let isCommentShown = { ...prev };\n      isCommentShown[commentIndex] = !isCommentShown[commentIndex];\n      return isCommentShown;\n    });\n  }\n\n  function handleReplyChange(e) {\n    setNewReply(e.target.value);\n  }\n\n  function handleReplySubmit(e, commentIndex) {\n    e.preventDefault();\n\n    fetch(`http://localhost:3000/animals/${animal.id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"content-type\": \"application/json\",\n        accept: \"application/json\",\n      },\n      body: JSON.stringify({\n        comments: animal.comments.map((comment, i) => {\n          if (i === commentIndex) {\n            return {\n              ...comment,\n              replies: [...comment.replies, { reply: newReply }],\n            };\n          }\n          return comment;\n        }),\n      }),\n    })\n      .then((response) => response.json())\n      .then((updatedAnimals) => {\n        setAnimals((prevAnimals) =>\n          prevAnimals.map((currentAnimals) => {\n            if (currentAnimals.id === updatedAnimals.id) {\n              return updatedAnimals;\n            } else {\n              return currentAnimals;\n            }\n          })\n        );\n      });\n\n    setNewReply(\"\");\n    setShowReply({});\n  }\n\n\n  function handleCommentSubmit(e) {\n    e.preventDefault();\n    if (newComment && !isLikeClicked) {\n      likeComments();\n      setnewComment(\"\")\n      updateAnimals();\n    }\n    setIsLikeClicked(false);\n    setnewComment(\"\");\n    setshowComment(true);\n  }\n\n  return (\n    <div>\n    <form onSubmit={handleCommentSubmit}>\n      {animal.comments.map((comments, commentIndex) => (\n        <>\n          <li\n            className=\"comments-list\"\n            key={commentIndex}\n            animal={animal}\n            setAnimals={setAnimals}\n          >\n            {comments.comment}\n          </li>\n          <button className=\"like-reply\" onClick={() => likeComments(commentIndex)}>\n            {likeComment[commentIndex] ? \"♥\" : \"♡\"}\n            Like\n          </button>\n          <button\n            className=\"like-reply\"\n            onClick={(e) => showCommentReplies(commentIndex)}\n          >\n             ↳ Reply\n          </button>\n          <ul className=\"ul-replies\">\n            {comments.replies.map((reply, replyIndex) => (\n              <li key={replyIndex} className=\"replies\">{reply.reply}</li>\n            ))}\n          </ul>\n          {showReply[commentIndex] ? (\n            <div className=\"comment-form\">\n              <textarea\n                type=\"text\"\n                value={newReply}\n                onChange={handleReplyChange}\n                placeholder=\"Write a reply...\"\n                className=\"type-reply\"\n              />\n              <button\n                className=\"post-comment-btn replyBtn\"\n                type=\"submit\"\n                onClick={(e) => handleReplySubmit(e,commentIndex)}\n              >\n                Reply\n              </button>\n            </div>\n          ) : null}\n        </>\n      ))}\n      <FetchCommentsForm \n        animal={animal}\n        setAnimals={setAnimals}\n        likeComments={likeComments}\n        \n      />\n\n    </form>\n  </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}